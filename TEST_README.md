# Программа тестирования торгового бота

## Описание

Отдельная программа для тестирования стратегий торгового бота с собственной базой данных и возможностью ручного тестирования.

## Возможности

- ✅ Собственная база данных для тестирования (SQLite)
- ✅ Ручное тестирование стратегий
- ✅ Симуляция торговых операций
- ✅ Анализ результатов тестирования
- ✅ Визуализация сделок и статистики
- ✅ Сохранение истории тестов
- ✅ Фильтрация по стратегиям

## Установка и запуск

### Требования

- Python 3.8+
- PySide6
- Все зависимости основного проекта

### Запуск

```bash
# Из корневой директории проекта
python test_program.py
```

## Использование

### 1. Тестирование стратегий

1. Откройте вкладку "Тестирование стратегий"
2. Выберите стратегию из выпадающего списка
3. Настройте параметры тестирования:
   - Длительность теста (количество шагов)
   - Начальный баланс в USDT
4. Нажмите "Запустить тест"
5. Наблюдайте за прогрессом и логами

### 2. Просмотр результатов

1. Откройте вкладку "Результаты тестов"
2. Просмотрите статистику всех проведенных тестов:
   - Название теста
   - Стратегия
   - Время проведения
   - Количество сделок
   - Прибыльность
   - Win Rate
   - Максимальная просадка

### 3. Анализ сделок

1. Откройте вкладку "Тестовые сделки"
2. Просмотрите детали всех симулированных сделок
3. Используйте фильтр по стратегиям
4. Сделки с прибылью выделены зеленым, с убытком - красным

## Структура базы данных

### Таблица test_trades

- `id` - Уникальный идентификатор сделки
- `strategy_name` - Название стратегии
- `symbol` - Торговая пара
- `side` - Сторона сделки (BUY/SELL)
- `quantity` - Количество
- `price` - Цена
- `timestamp` - Время сделки
- `profit_loss` - Прибыль/убыток
- `status` - Статус (simulated)

### Таблица test_results

- `id` - Уникальный идентификатор теста
- `test_name` - Название теста
- `strategy_name` - Название стратегии
- `start_time` - Время начала
- `end_time` - Время окончания
- `total_trades` - Общее количество сделок
- `profitable_trades` - Количество прибыльных сделок
- `total_profit` - Общая прибыль
- `max_drawdown` - Максимальная просадка
- `win_rate` - Процент прибыльных сделок
- `notes` - Заметки

## Конфигурация

Настройки программы находятся в файле `test_config.json`:

- `test_database` - Настройки базы данных
- `test_settings` - Параметры тестирования по умолчанию
- `strategies_config` - Конфигурация стратегий
- `simulation_config` - Параметры симуляции
- `ui_config` - Настройки интерфейса
- `logging` - Настройки логирования

## Файлы программы

- `test_program.py` - Основной файл программы
- `test_config.json` - Файл конфигурации
- `test_trading_bot.db` - База данных тестирования (создается автоматически)
- `test_program.log` - Лог файл программы

## Особенности

### Симуляция торговли

- Программа не выполняет реальные торговые операции
- Все сделки симулируются с использованием случайных данных
- Цены генерируются в реалистичных диапазонах
- Прибыль/убыток рассчитывается случайным образом для демонстрации

### Безопасность

- Программа использует отдельную базу данных
- Не влияет на основную программу торгового бота
- Не требует API ключей для тестирования
- Все операции выполняются локально

### Производительность

- Многопоточное выполнение тестов
- Возможность остановки тестирования
- Прогресс-бар для отслеживания выполнения
- Автоматическое сохранение результатов

## Расширение функциональности

### Добавление новых стратегий

1. Добавьте стратегию в основной проект
2. Убедитесь, что она включена в `AVAILABLE_STRATEGIES`
3. Перезапустите тестовую программу

### Настройка симуляции

1. Отредактируйте `test_config.json`
2. Измените параметры в разделе `simulation_config`
3. Перезапустите программу

### Кастомизация интерфейса

1. Измените настройки в разделе `ui_config`
2. Отредактируйте методы создания интерфейса в `test_program.py`

## Устранение неполадок

### Программа не запускается

- Проверьте установку всех зависимостей
- Убедитесь, что Python путь настроен правильно
- Проверьте логи в `test_program.log`

### Ошибки базы данных

- Удалите файл `test_trading_bot.db` для пересоздания
- Проверьте права доступа к директории
- Убедитесь, что SQLite доступен

### Проблемы с тестированием

- Проверьте доступность стратегий в основном проекте
- Убедитесь, что все импорты работают корректно
- Проверьте логи тестирования в интерфейсе

## Планы развития

- [ ] Интеграция с реальными историческими данными
- [ ] Более сложные алгоритмы симуляции
- [ ] Графики и диаграммы результатов
- [ ] Экспорт результатов в CSV/Excel
- [ ] Сравнение стратегий
- [ ] Оптимизация параметров стратегий
- [ ] Backtesting на исторических данных

## Поддержка

Для получения помощи:

1. Проверьте логи программы
2. Убедитесь в корректности конфигурации
3. Проверьте совместимость с основным проектом

---

**Примечание**: Эта программа предназначена исключительно для тестирования и не выполняет реальные торговые операции.